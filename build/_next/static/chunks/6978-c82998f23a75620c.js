"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6978],{6978:function(e,t,a){a.r(t);var r=a(4051),n=a.n(r),l=a(5893),o=a(2664),i=a(297),s=a(2702),d=a.n(s),c=a(1664),u=a.n(c),v=a(2920),p=a(7294),m=a(3436),h=a(7421),f=a(1163);function x(e,t,a,r,n,l,o){try{var i=e[l](o),s=i.value}catch(d){return void a(d)}i.done?t(s):Promise.resolve(s).then(r,n)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){x(l,r,n,o,i,"next",e)}function i(e){x(l,r,n,o,i,"throw",e)}o(void 0)}))}}function j(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}t.default=(0,o.$j)((function(e){return{cartItems:e.cart,activeCart:e.counter}}),{})((function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,a,r,o,s,c,x,b=(0,h.$G)("common").t,g=d().BASE_URL_UPLOADS,y=(0,p.useState)([]),k=y[0],N=y[1],S=(0,p.useState)([]),D=(S[0],S[1]),C=(0,p.useState)(0),A=(C[0],C[1]),_=(0,p.useState)(1),W=(_[0],_[1]),I=(0,p.useState)([]),E=(I[0],I[1]),P=(0,p.useState)(""),R=P[0],z=P[1],T=(0,p.useState)([]),O=T[0],Z=T[1],G=(0,f.useRouter)(),Q=function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return e.finalAmount*e.selectedQuantity})),a=null===e||void 0===e?void 0:e.map((function(e){return e.selectedQuantity})),r=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t}),0),n=null===a||void 0===a?void 0:a.reduce((function(e,t){return e+t}),0);A(r),W(n)},L=function(){var e=w(n().mark((function e(){var t,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.myprofile.GET_MY_ADDRESS();case 3:(t=e.sent)&&E(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){M(),U(),L()}),[]);var M=function(){var e=w(n().mark((function e(){var t,a,r,l,o,i,s,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=4,m.Z.cart.GET_CART();case 4:(t=e.sent)&&(N(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.data)||void 0===r||null===(l=r.cartDetail)||void 0===l?void 0:l.cartDetails),Q(null===t||void 0===t||null===(o=t.data)||void 0===o||null===(i=o.data)||void 0===i||null===(s=i.cartDetail)||void 0===s?void 0:s.cartDetails)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:e.next=14;break;case 13:localStorage.getItem("cartDetail")&&(d=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),N(d.cartDetails),Q(d.cartDetails));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=w(n().mark((function e(){var t,a,r,l,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=5,m.Z.myprofile.GET_MY_ADDRESS();case 5:l=e.sent,D(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data),(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.length)>0&&(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(i=o.data)||void 0===i||i.map((function(e){console.log(e)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=w(n().mark((function e(t){var a,r,l,o,i,s,d,c,u,p,h,f,x,w,j,b,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=23;break}return e.next=4,m.Z.cart.GET_CART();case 4:return l=e.sent,o=[],(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.cartDetail.cartDetails)&&(o=null===l||void 0===l||null===(i=l.data)||void 0===i||null===(s=i.data)||void 0===s||null===(d=s.cartDetail)||void 0===d?void 0:d.cartDetails),null===o||void 0===o||o.push(t),"id",c=o.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id&&t.selectedSize===e.selectedSize&&t.selectedColor===e.selectedColor}))})),u=c.map((function(e){return e.finalAmount*e.selectedQuantity})),p=c.map((function(e){return e.selectedQuantity})),h=u.reduce((function(e,t){return e+t}),0),f=p.reduce((function(e,t){return e+t}),0),x={cartDetail:{cartDetails:c},totalAmount:h,totalItems:c.length,totalQuantity:f},console.log("Address",R),e.next=18,m.Z.cart.UPDATE_CART(x);case 18:e.sent,v.Am.success("Cart updated!"),M(),e.next=24;break;case 23:w=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),j=[],w&&(j=w.cartDetails),j.push(t),"id",b=j.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id&&t.selectedSize===e.selectedSize&&t.selectedColor===e.selectedColor}))})),g={cartDetail:{cartDetails:b}},localStorage.setItem("cartDetail",JSON.stringify(null===g||void 0===g?void 0:g.cartDetail)),v.Am.success("Cart updated!"),M();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=localStorage.getItem("access_token");function J(){return(J=w(n().mark((function e(){var t,a,r,l,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,j("https://checkout.razorpay.com/v1/checkout.js");case 3:if(e.sent){e.next=7;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 7:return e.next=9,Y(k[0]);case 9:return e.next=11,m.Z.cart.CHECKOUT();case 11:l=e.sent,o=JSON.parse(localStorage.getItem("profile")),i={key:"rzp_test_ug6gBARp85Aq1j",currency:"INR",amount:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.totalAmount,order_id:null===l||void 0===l||null===(a=l.data)||void 0===a||null===(r=a.razorpayPaymentDetails)||void 0===r?void 0:r.id,name:"KoraKagaj",description:"Thank you for ordering. Please initiate payment!",image:"http://korakagaj-dev.s3-website.ap-south-1.amazonaws.com/assets/imgs/theme/logo.svg",modal:{ondismiss:w(n().mark((function e(){var t,a,r,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Checkout form closed"),i={orderId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.id,paymentResponse:{id:null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.razorpayPaymentDetails.id,status:"failed",amount:null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.totalAmount}},e.next=5,m.Z.cart.PAYMENT_LOG(i);case 5:e.sent,G.push("/failed");case 7:case"end":return e.stop()}}),e)})))},handler:function(e){w(n().mark((function e(){var t,a,r,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={orderId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.id,paymentResponse:{id:null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.razorpayPaymentDetails.id,status:"paid",amount:null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.totalAmount}},e.prev=2,e.next=5,m.Z.cart.PAYMENT_LOG(i);case 5:e.sent,G.push("/thankyou"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},prefill:{name:o.firstName,email:o.email,phone_number:o.phoneNumber}},new window.Razorpay(i).open();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(){var e=w(n().mark((function e(t){var a,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,m.Z.myprofile.GET_MY_ADDRESS();case 4:r=e.sent,Z(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.data.find((function(e){return e.id==t}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("id");z(e),K(e)}),[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Z,{parent:b("Home"),sub:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("a",{href:"/products",children:[" ",b("Product")]})}),subChild:b("Cart"),children:(0,l.jsx)("section",{className:"mt-50 mb-50",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsxs)("div",{className:"table-responsive",children:[(null===k||void 0===k?void 0:k.length)>0?"":b("No Products"),(0,l.jsxs)("table",{className:(null===k||void 0===k?void 0:k.length)>0?"table shopping-summery text-center clean":"d-none",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"main-heading",children:[(0,l.jsx)("th",{scope:"col",children:b("Image")}),(0,l.jsx)("th",{scope:"col",children:b("Name")}),(0,l.jsx)("th",{scope:"col",children:b("Price")}),(0,l.jsx)("th",{scope:"col",children:b("Quantity")}),(0,l.jsx)("th",{scope:"col",children:b("Subtotal")})]})}),(0,l.jsx)("tbody",{children:k&&k.map((function(e,t){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"image product-thumbnail",children:(0,l.jsx)("img",{src:g+e.featuredImage,alt:"",crossOrigin:"anonymous"})}),(0,l.jsxs)("td",{className:"product-des product-name",children:[(0,l.jsx)("h5",{className:"product-name",children:(0,l.jsx)(u(),{href:"/products/[slug]",as:"/products/".concat(null===e||void 0===e?void 0:e.id),children:(0,l.jsx)("a",{children:e.productName})})}),(null===e||void 0===e?void 0:e.selectedColor)||(null===e||void 0===e?void 0:e.selectedSize)?(0,l.jsxs)("div",{className:"font-xs",children:[(null===e||void 0===e?void 0:e.selectedColor)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"align-items-center row pe-0 ps-0 m-0",children:(0,l.jsxs)("div",{className:"col pe-0 ps-0 m-0 p-0",children:[(0,l.jsx)("small",{className:"mb-0 m-0",children:"Color :"})," ","\xa0"," ",(0,l.jsx)("span",{className:"d-inline-block rounded-circle ps-1 pe-0 m-0 mt-2",style:{border:"1px solid black",width:"12px",height:"12px",backgroundColor:null===e||void 0===e?void 0:e.selectedColor}})," "]})})}),(null===e||void 0===e?void 0:e.selectedSize)&&(0,l.jsxs)("small",{className:"ml-md-2",children:["Size: ",null===e||void 0===e?void 0:e.selectedSize]})]}):null]}),(0,l.jsx)("td",{className:"price","data-title":"Price",children:(0,l.jsxs)("span",{children:["Rs. ",e.finalAmount]})}),(0,l.jsx)("td",{className:"text-center","data-title":"Stock",children:(0,l.jsx)("div",{className:"detail-qty border radius m-auto",children:(0,l.jsx)("span",{className:"qty-val",children:e.selectedQuantity})})}),(0,l.jsx)("td",{className:"text-right","data-title":"Cart",children:(0,l.jsxs)("span",{children:["Rs."," ",(e.finalAmount*e.selectedQuantity).toFixed(2)]})})]},t)}))})]})]}),(0,l.jsx)("div",{className:"divider center_icon mt-50 mb-50",children:(0,l.jsx)("i",{className:"fi-rs-fingerprint"})}),(0,l.jsxs)("div",{className:"row mb-50",children:[(0,l.jsx)("div",{className:"col-lg-8 col-md-16",children:(0,l.jsx)("div",{className:"col-lg-6",children:(null===k||void 0===k?void 0:k.length)>0&&(0,l.jsxs)("div",{className:"card mb-3 mb-lg-0",children:[(0,l.jsx)("div",{className:"card-header d-flex justify-content-between",children:(0,l.jsx)("h5",{className:"mb-0",children:b("Select Address")})}),(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("address",{children:[" ",(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(t=O.address)||void 0===t?void 0:t.fullName}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===(a=O.address)||void 0===a?void 0:a.phoneNumber}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(r=O.address)||void 0===r?void 0:r.houseNo}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(o=O.address)||void 0===o?void 0:o.address}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(s=O.address)||void 0===s?void 0:s.city}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(c=O.address)||void 0===c?void 0:c.pinCode}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(x=O.address)||void 0===x?void 0:x.state})]})})]})})}),(0,l.jsx)("div",{className:"col-lg-4 col-md-8 text-end",children:F?(0,l.jsxs)("a",{onClick:function(){!function(){J.apply(this,arguments)}()},href:"#",className:"btn ",children:[(0,l.jsx)("i",{className:"fi-rs-box-alt mr-10"}),b("Proceed To CheckOut")]}):(0,l.jsx)(u(),{className:"btn",href:"/login",children:(0,l.jsxs)("a",{href:"#",className:"btn ",children:[(0,l.jsx)("i",{className:"fi-rs-box-alt mr-10"}),b("Proceed to Login")]})})})]})]})})})})})})}))}}]);