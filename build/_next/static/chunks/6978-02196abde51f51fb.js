"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6978],{6978:function(e,t,a){a.r(t);var n=a(4051),r=a.n(n),l=a(5893),s=a(2664),i=a(297),o=a(2702),d=a.n(o),c=a(1664),u=a.n(c),v=a(2920),m=a(7294),h=a(7699),p=a(7421),x=a(1163),f=a(6248);function j(e,t,a,n,r,l,s){try{var i=e[l](s),o=i.value}catch(d){return void a(d)}i.done?t(o):Promise.resolve(o).then(n,r)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function s(e){j(l,n,r,s,i,"next",e)}function i(e){j(l,n,r,s,i,"throw",e)}s(void 0)}))}}function w(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}t.default=(0,s.$j)((function(e){return{cartItems:e.cart,activeCart:e.counter}}),{})((function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t,a,n,s,o,c,j,N=(0,p.$G)("common").t,g=(d().BASE_URL_UPLOADS,(0,m.useState)([])),y=g[0],S=g[1],k=(0,m.useState)([]),_=(k[0],k[1]),D=(0,m.useState)(0),C=D[0],A=D[1],I=(0,m.useState)(1),P=(I[0],I[1]),R=(0,m.useState)([]),W=(R[0],R[1]),E=(0,m.useState)(""),T=(E[0],E[1]),z=(0,m.useState)([]),O=z[0],F=z[1],Z=(0,m.useState)(""),Q=Z[0],G=Z[1],J=(0,m.useState)(""),L=J[0],M=J[1],U=(0,m.useState)(""),Y=(U[0],U[1]),K=(0,x.useRouter)(),q=function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return e.finalAmount*e.selectedQuantity})),a=null===e||void 0===e?void 0:e.map((function(e){return e.selectedQuantity})),n=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t}),0),r=null===a||void 0===a?void 0:a.reduce((function(e,t){return e+t}),0);A(n),M(n),P(r)},B=function(){var e=b(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.myprofile.GET_MY_ADDRESS();case 3:(t=e.sent)&&W(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){H(),$(),B()}),[]);var H=function(){var e=b(r().mark((function e(){var t,a,n,l,s,i,o,d,c,u,v,m,p,x,f,j;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=14;break}return e.prev=1,e.next=4,h.Z.cart.GET_CART();case 4:(t=e.sent)&&(S(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.data)||void 0===n||null===(l=n.cartDetail)||void 0===l?void 0:l.cartDetails),q(null===t||void 0===t||null===(s=t.data)||void 0===s||null===(i=s.data)||void 0===i||null===(o=i.cartDetail)||void 0===o?void 0:o.cartDetails)),t.data.discountAmount&&(G(null===(d=t.data.discountAmount)||void 0===d?void 0:d.discount),f=JSON.parse(null===t||void 0===t||null===(c=t.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.discountCode),Y(f),JSON.parse(null===t||void 0===t||null===(v=t.data)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.totalAmount)-(null===t||void 0===t||null===(p=t.data)||void 0===p||null===(x=p.data)||void 0===x?void 0:x.discountCode)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:e.next=15;break;case 14:localStorage.getItem("cartDetail")&&(j=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),S(j.cartDetails),q(j.cartDetails));case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=b(r().mark((function e(){var t,a,n,l,s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=5,h.Z.myprofile.GET_MY_ADDRESS();case 5:l=e.sent,_(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.data),(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length)>0&&(null===l||void 0===l||null===(s=l.data)||void 0===s||null===(i=s.data)||void 0===i||i.map((function(e){}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=b(r().mark((function e(t){var a,n,l,s,i,o,d,c,u,m,p,x,f,j,b,w,N,g,y,S,k;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=25;break}return e.next=4,h.Z.cart.GET_CART();case 4:return o=e.sent,d=null===o||void 0===o||null===(a=o.data)||void 0===a||null===(n=a.discountAmount)||void 0===n?void 0:n.id,c=[],(null===o||void 0===o||null===(l=o.data)||void 0===l||null===(s=l.data)||void 0===s||null===(i=s.cartDetail)||void 0===i?void 0:i.cartDetails)&&(c=null===o||void 0===o||null===(u=o.data)||void 0===u||null===(m=u.data)||void 0===m||null===(p=m.cartDetail)||void 0===p?void 0:p.cartDetails),null===c||void 0===c||c.push(t),"id",x=c.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id&&t.selectedSize===e.selectedSize&&t.selectedColor===e.selectedColor&&t.fabric===e.fabric}))})),f=x.map((function(e){return e.finalAmount*e.selectedQuantity})),j=x.map((function(e){return e.selectedQuantity})),b=f.reduce((function(e,t){return e+t}),0),w=j.reduce((function(e,t){return e+t}),0),N={cartDetail:{cartDetails:x,discountId:d},totalAmount:b,totalItems:x.length,totalQuantity:w},localStorage.setItem("cartItemsCount",x.length),e.next=19,h.Z.cart.UPDATE_CART(N);case 19:e.sent,v.Am.success("Cart updated!"),localStorage.setItem("cartItemsCount",0),H(),e.next=26;break;case 25:g=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),y=[],g&&(y=g.cartDetails),y.push(t),"id",S=y.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id&&t.selectedSize===e.selectedSize&&t.selectedColor===e.selectedColor&&t.fabric===e.fabric}))})),k={cartDetail:{cartDetails:S}},localStorage.setItem("cartDetail",JSON.stringify(null===k||void 0===k?void 0:k.cartDetail)),v.Am.success("Cart updated!"),H();case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=localStorage.getItem("access_token");function ee(){return(ee=b(r().mark((function e(){var t,a,n,l,s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,w("https://checkout.razorpay.com/v1/checkout.js");case 3:if(e.sent){e.next=7;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 7:return e.next=9,V(y[0]);case 9:return e.next=11,h.Z.cart.CHECKOUT();case 11:l=e.sent,s=JSON.parse(localStorage.getItem("profile")),i={key:"rzp_test_ug6gBARp85Aq1j",currency:"INR",amount:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.totalAmount,order_id:null===l||void 0===l||null===(a=l.data)||void 0===a||null===(n=a.razorpayPaymentDetails)||void 0===n?void 0:n.id,name:"KoraKagaj",description:"Thank you for ordering. Please initiate payment!",image:"http://korakagaj-dev.s3-website.ap-south-1.amazonaws.com/assets/imgs/theme/logo.svg",modal:{ondismiss:b(r().mark((function e(){var t,a,n,s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={orderId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.id,paymentResponse:{id:null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.razorpayPaymentDetails.id,status:"failed",amount:null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.totalAmount}},e.next=4,h.Z.cart.PAYMENT_LOG(i);case 4:e.sent,K.push("/failed");case 6:case"end":return e.stop()}}),e)})))},handler:function(e){b(r().mark((function e(){var t,a,n,s,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={orderId:null===l||void 0===l||null===(t=l.data)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.id,paymentResponse:{id:null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.razorpayPaymentDetails.id,status:"paid",amount:null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.totalAmount}},e.prev=2,e.next=5,h.Z.cart.PAYMENT_LOG(i);case 5:e.sent,K.push("/thankyou"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},prefill:{name:s.firstName,email:s.email,phone_number:s.phoneNumber}},new window.Razorpay(i).open();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(){var e=b(r().mark((function e(t){var a,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,h.Z.myprofile.GET_MY_ADDRESS();case 4:n=e.sent,F(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data.find((function(e){return e.id==t}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("id");T(e),te(e)}),[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Z,{parent:N("Home"),sub:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u(),{href:"/products",as:"/products",children:N("Product")})}),subChild:N("Cart"),children:(0,l.jsx)("section",{className:"mt-50 mb-50",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("div",{className:"cart-action text-Start",style:{marginBottom:"10px"},children:(0,l.jsx)("h3",{children:N("Preview Page")})}),(0,l.jsxs)("div",{className:"table-responsive",children:[(null===y||void 0===y?void 0:y.length)>0?"":N("No Products"),(0,l.jsxs)("table",{className:(null===y||void 0===y?void 0:y.length)>0?"table shopping-summery text-center clean":"d-none",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"main-heading",children:[(0,l.jsx)("th",{scope:"col",children:N("Image")}),(0,l.jsx)("th",{scope:"col",children:N("Name")}),(0,l.jsx)("th",{scope:"col",children:N("Fabric Name")}),(0,l.jsx)("th",{scope:"col",children:N("Price")}),(0,l.jsx)("th",{scope:"col",children:N("Quantity")}),(0,l.jsx)("th",{scope:"col",children:N("Subtotal")})]})}),(0,l.jsx)("tbody",{children:f&&f.map((function(e,t){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"image product-thumbnail","data-title":"Image",children:(0,l.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:"",crossOrigin:"anonymous"})}),(0,l.jsxs)("td",{className:"product-name","data-title":"Product Name",children:[(0,l.jsx)("h5",{className:"product-name",children:(0,l.jsx)(u(),{href:"/products/".concat(null===e||void 0===e?void 0:e.id,"_").concat(null===e||void 0===e?void 0:e.productName),as:"/products/".concat(null===e||void 0===e?void 0:e.id,"_").concat(null===e||void 0===e?void 0:e.productName),children:(0,l.jsx)("a",{children:e.productName})})}),(null===e||void 0===e?void 0:e.selectedColor)||(null===e||void 0===e?void 0:e.selectedSize)?(0,l.jsxs)("div",{className:"font-xs",children:[(null===e||void 0===e?void 0:e.selectedColor)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"align-items-center row pe-0 ps-0 m-0",children:(0,l.jsxs)("div",{className:"col pe-0 ps-0 m-0 p-0",children:[(0,l.jsx)("small",{className:"mb-0 m-0",children:"Color :"})," ","\xa0"," ",(0,l.jsx)("span",{className:"d-inline-block rounded-circle ps-1 pe-0 m-0 mt-2",style:{border:"1px solid black",width:"12px",height:"12px",backgroundColor:null===e||void 0===e?void 0:e.selectedColor}})," "]})})}),(null===e||void 0===e?void 0:e.selectedSize)&&(0,l.jsxs)("small",{className:"ml-md-2",children:["Size: ",null===e||void 0===e?void 0:e.selectedSize]})]}):null]}),(0,l.jsx)("td",{className:"Fabric name","data-title":"Fabric name",children:(0,l.jsx)("span",{children:null===e||void 0===e?void 0:e.fabric})}),(0,l.jsx)("td",{className:"price","data-title":"Price",children:(0,l.jsxs)("span",{children:["Rs. ",e.finalAmount]})}),(0,l.jsx)("td",{className:"text-center","data-title":"Quantity",children:(0,l.jsx)("div",{className:"detail-qty border radius m-auto",children:(0,l.jsx)("span",{className:"qty-val",children:e.selectedQuantity})})}),(0,l.jsx)("td",{className:"text-right","data-title":"Subtotal",children:(0,l.jsxs)("span",{children:["Rs."," ",(e.finalAmount*e.selectedQuantity).toFixed(2)]})})]},t)}))})]})]}),(0,l.jsx)("div",{className:"divider center_icon mt-50 mb-50",children:(0,l.jsx)("hr",{})}),(0,l.jsxs)("div",{className:"row mb-50",children:[(0,l.jsx)("div",{className:"col-lg-6 col-md-16",children:(0,l.jsx)("div",{className:"col-lg-6",children:(null===y||void 0===y?void 0:y.length)>0&&(0,l.jsxs)("div",{className:"card mb-3 mb-lg-0",children:[(0,l.jsx)("div",{className:"card-header d-flex justify-content-between",children:(0,l.jsx)("h5",{className:"mb-0",children:N("Select Address")})}),(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("address",{children:[" ",(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(t=O.address)||void 0===t?void 0:t.fullName}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(a=O.address)||void 0===a?void 0:a.phoneNumber}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(n=O.address)||void 0===n?void 0:n.houseNo}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(s=O.address)||void 0===s?void 0:s.address}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(o=O.address)||void 0===o?void 0:o.city}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(c=O.address)||void 0===c?void 0:c.pinCode}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"10ch"},children:null===O||void 0===O||null===(j=O.address)||void 0===j?void 0:j.state})]})})]})})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"border p-md-4 p-30 border-radius cart-totals",children:[(0,l.jsx)("div",{className:"heading_s1 mb-3",children:(0,l.jsx)("h4",{children:N("Cart Totals")})}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsx)("table",{className:"table",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"cart_total_label",children:N("Cart Subtotal")}),(0,l.jsx)("td",{className:"cart_total_amount",children:(0,l.jsxs)("span",{className:"font-lg fw-900 text-brand",children:["Rs. ",L]})})]}),Q&&(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"cart_total_label",children:N("Discount Percentage")}),(0,l.jsxs)("td",{className:"cart_total_amount",children:[(0,l.jsx)("i",{className:"ti-gift mr-5"}),Q,"%"]})]}),Q&&(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"cart_total_label",children:N("Discount Amount")}),(0,l.jsx)("td",{className:"cart_total_amount",children:(0,l.jsx)("strong",{children:(0,l.jsxs)("span",{className:"font-xl fw-900 text-brand",children:["Rs."," ",(0,l.jsx)("s",{children:(C*Q/100).toFixed(2)})]})})})]}),Q?(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"cart_total_label",children:N("Total")}),(0,l.jsx)("td",{className:"cart_total_amount",children:(0,l.jsx)("strong",{children:(0,l.jsxs)("span",{className:"font-xl fw-900 text-brand",children:["Rs."," ",(C-C*Q/100).toFixed(2)]})})})]}):(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"cart_total_label",children:N("Total")}),(0,l.jsx)("td",{className:"cart_total_amount",children:(0,l.jsx)("strong",{children:(0,l.jsxs)("span",{className:"font-xl fw-900 text-brand",children:["Rs. ",null===C||void 0===C?void 0:C.toFixed(2)]})})})]})]})})}),(0,l.jsx)("div",{className:"text-center",children:X?(0,l.jsxs)("a",{onClick:function(){!function(){ee.apply(this,arguments)}()},className:"btn",children:[(0,l.jsx)("i",{className:"fi-rs-box-alt mr-10"}),N("Proceed To CheckOut")]}):(0,l.jsx)("a",{className:"btn",href:"/login",children:(0,l.jsxs)("a",{className:"btn ",children:[(0,l.jsx)("i",{className:"fi-rs-box-alt mr-10"}),N("Proceed to Login")]})})})]})})]})]})})})})})})}))}}]);