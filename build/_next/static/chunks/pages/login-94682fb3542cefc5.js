(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4754)}])},4754:function(e,t,r){"use strict";r.r(t);var a=r(4051),n=r.n(a),s=r(5893),o=r(297),l=(r(4213),r(3436)),i=r(9603),c=r(9417),u=r(7294),d=r(2920),m=r(1163),h=r(7421);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function p(e,t,r,a,n,s,o){try{var l=e[s](o),i=l.value}catch(c){return void r(c)}l.done?t(i):Promise.resolve(i).then(a,n)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var s=e.apply(t,r);function o(e){p(s,a,n,o,l,"next",e)}function l(e){p(s,a,n,o,l,"throw",e)}o(void 0)}))}}function f(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var e=(0,h.$G)("common").t,t=(0,u.useState)(""),r=t[0],a=t[1],v=(0,u.useState)(""),p=v[0],x=v[1],b=(0,m.useRouter)(),j=(0,u.useState)(!1),w=j[0],N=j[1],y=(0,u.useState)(""),S=y[0],k=y[1],_=(0,u.useState)(""),E=_[0],D=_[1],I=(0,u.useState)(!0),A=I[0],C=I[1],O=(0,u.useState)(!0),P=O[0],T=O[1],L=(0,u.useState)(!1),R=L[0],q=L[1],U=(0,u.useState)(!1),F=U[0],G=U[1],M=(0,u.useState)(""),Z=M[0],$=M[1],z=(0,u.useState)(""),H=z[0],K=z[1],W=function(e){var t,r;d.Am.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"An error occurred")},X=function(){var e=g(n().mark((function e(t){var a,s,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||t.preventDefault(),a=!0,k(""),D(""),w?(localStorage.setItem("rememberedUsername",r),localStorage.setItem("rememberedPassword",p),localStorage.setItem("rememberMe",!0)):(localStorage.removeItem("rememberedUsername"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("rememberMe")),""===r?(k("Enter a valid email address"),a=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||(k("Enter a valid email address"),a=!1),""===p&&(D("Please enter the password"),a=!1),!a){e.next=23;break}return e.prev=8,s={email:r,password:p,role:"Customer"},e.next=12,l.Z.auth.LOGIN_USER(s);case 12:return o=e.sent,e.next=15,Y();case 15:o&&(localStorage.setItem("userId",null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.user.id),B(),C(!1),setTimeout((function(){b.push("/")}),1e3)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0),C(!0),J(e.t0);case 23:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(t){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){var e=localStorage.getItem("rememberedUsername"),t=localStorage.getItem("rememberedPassword");localStorage.getItem("rememberMe")&&(a(e||""),x(t||""),N(!0))}),[]);var Y=function(){var e=g(n().mark((function e(){var t,r,a,s,o,i,c,u,d,m,h,v,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!localStorage.getItem("cartDetail")){e.next=21;break}return s=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),o=[],s&&(null===s||void 0===s||null===(t=s.cartDetails)||void 0===t?void 0:t.length)>0&&(o=s.cartDetails),e.next=8,l.Z.cart.GET_CART();case 8:return i=e.sent,c=[],(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.cartDetail.cartDetails)&&(c=null===i||void 0===i||null===(u=i.data)||void 0===u||null===(d=u.data)||void 0===d||null===(m=d.cartDetail)||void 0===m?void 0:m.cartDetails),c=f(c).concat(f(o)),"id",h=f(new Map(c.map((function(e){return[e.id,e]}))).values()),v={cartDetail:{cartDetails:h}},console.log(v),e.next=18,l.Z.cart.UPDATE_CART(v);case 18:p=e.sent,console.log(p),localStorage.removeItem("cartDetail");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),B=function(){return d.Am.success("Login User successfully")},J=function(e){var t,r;d.Am.error((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"An error occurred")},Q=function(){var e=g(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0),G(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=g(n().mark((function e(t){var r,a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!1),t.preventDefault(),r=!0,K(""),""===Z?(K("Enter a valid email address"),r=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)||(K("Enter a valid email address"),r=!1),!r){e.next=20;break}return e.prev=6,a={email:Z},console.log(a),e.next=11,l.Z.auth.FORGOT_PASSWORD(a);case 11:(s=e.sent)?(d.Am.success("Email Sent successfully"),G(!1),T(!1)):alert(s.data.guide),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),W(e.t0),T(!0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),!1===F&&(0,s.jsx)(o.Z,{parent:e("Home"),sub:(0,s.jsx)("a",{href:"/login",children:e("Login")}),children:(0,s.jsx)("section",{className:"pt-100 pb-100 bg-image",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 m-auto",children:(0,s.jsx)("div",{className:"row justify-content-around",children:(0,s.jsx)("div",{className:"col-lg-5",children:(0,s.jsx)("div",{className:"login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5",children:(0,s.jsxs)("div",{className:"padding_eight_all bg-white",children:[(0,s.jsx)("div",{className:"heading_s1",children:(0,s.jsx)("h3",{className:"mb-30",children:e("Login")})}),(0,s.jsxs)("form",{method:"post",onSubmit:X,children:[(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{type:"text",required:"",name:"email",placeholder:e("Your Email"),value:r,onChange:function(e){a(e.target.value.trim()),e.target.value.trim()&&a(e.target.value),0===e.target.value.length?k("Required"):k("")},onKeyDown:function(e){"Enter"===e.key?X():a(e.target.value)}}),S?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:S})}):null]}),(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{required:"",type:R?"text":"password",name:"password",placeholder:e("Password"),onChange:function(e){x(e.target.value.trim()),e.target.value.trim()&&x(e.target.value),0===e.target.value.length?D("Required"):D("")},value:p,onKeyDown:function(e){"Enter"===e.key?X():x(e.target.value),e.target.value&&D("")},"aria-describedby":"password"}),(0,s.jsx)(i.G,{icon:R?c.Aq:c.Mdf,className:"icon-class",onClick:function(){q(!R)},style:{position:"absolute",cursor:"pointer",marginTop:"13px",width:"17px",marginLeft:"-29px"}}),E?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:E})}):null]}),"\xa0 \xa0 \xa0",(0,s.jsxs)("div",{className:"login_footer form-group",children:[(0,s.jsx)("div",{className:"chek-form",children:(0,s.jsxs)("div",{className:"custome-checkbox",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",name:"checkbox",id:"exampleCheckbox1",checked:w,onChange:function(){return N(!w)}}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"exampleCheckbox1",children:(0,s.jsx)("span",{children:e("Remember me")})})]})}),(0,s.jsx)("span",{onClick:Q,style:{cursor:"pointer"},children:e("Forgot password?")})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-fill-out btn-block hover-up w-100",name:"login",disabled:!(r&&p&&A),children:e("Log in")})})]}),(0,s.jsx)("div",{className:"divider-text-center mt-15 mb-15",children:(0,s.jsxs)("span",{children:[" ",e("or")]})}),(0,s.jsxs)("ul",{className:"btn-login list_none text-center mb-15",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"btn btn-facebook hover-up mb-lg-0 mb-sm-4",children:e("Login With Facebook")})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"btn btn-google hover-up mt-2",children:e("Login With Google")})})]}),(0,s.jsxs)("div",{className:"text-muted text-center",children:[" ",e("Don't have an account ?"),"  ",(0,s.jsx)("a",{href:"/register",children:e("Sign up now")})]})]})})})})})})})})}),F&&(0,s.jsx)(o.Z,{parent:e("Home"),sub:(0,s.jsx)("a",{href:"/login",children:e("Login")}),children:(0,s.jsx)("section",{className:"pt-100 pb-100 bg-image",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 m-auto",children:(0,s.jsx)("div",{className:"row justify-content-around",children:(0,s.jsx)("div",{className:"col-lg-5",children:(0,s.jsx)("div",{className:"login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5",children:(0,s.jsxs)("div",{className:"padding_eight_all bg-white",children:[(0,s.jsx)("div",{className:"heading_s1",children:(0,s.jsx)("h4",{className:"mb-30",children:e("Enter your email to reset your password")})}),(0,s.jsxs)("form",{method:"post",onSubmit:V,children:[(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{type:"text",required:"",name:"email",placeholder:e("Your Email"),value:Z,onChange:function(e){$(e.target.value.trim()),T(!0),e.target.value.trim()&&$(e.target.value),0===e.target.value.length?(K("Required"),T(!0)):K("")},onKeyDown:function(e){"Enter"===e.key?V():$(e.target.value)}}),H?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:H})}):null]}),"\xa0 \xa0 \xa0",(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{className:"btn btn-fill-out btn-block hover-up w-100",disabled:!(P&&Z),children:e("Save")})})]})]})})})})})})})})})]})}}},function(e){e.O(0,[976,664,750,603,436,695,774,888,179],(function(){return t=6429,e(e.s=t);var t}));var t=e.O();_N_E=t}]);