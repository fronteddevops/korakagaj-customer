(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{8024:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop-cart",function(){return a(8187)}])},8187:function(e,t,a){"use strict";a.r(t);var n=a(4051),r=a.n(n),s=a(5893),l=a(2664),c=a(1163),i=a(297),o=a(2702),d=a.n(o),u=a(1664),m=a.n(u),h=a(2920),p=a(7294),v=a(3436),f=a(7421);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function j(e,t,a,n,r,s,l){try{var c=e[s](l),i=c.value}catch(o){return void a(o)}c.done?t(i):Promise.resolve(i).then(n,r)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function l(e){j(s,n,r,l,c,"next",e)}function c(e){j(s,n,r,l,c,"throw",e)}l(void 0)}))}}function N(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}t.default=(0,l.$j)((function(e){return{cartItems:e.cart,activeCart:e.counter}}),{})((function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=(0,f.$G)("common").t,a=d().BASE_URL_UPLOADS,n=(0,p.useState)([]),l=n[0],o=n[1],u=(0,p.useState)([]),x=u[0],j=u[1],y=(0,p.useState)(0),_=y[0],S=y[1],k=(0,p.useState)(1),w=k[0],A=k[1],D=(0,p.useState)(0),C=D[0],I=D[1],T=(0,p.useState)([]),E=(T[0],T[1]),R=(0,c.useRouter)(),P=function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return e.finalAmount*e.selectedQuantity})),a=null===e||void 0===e?void 0:e.map((function(e){return e.selectedQuantity})),n=null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t}),0),r=null===a||void 0===a?void 0:a.reduce((function(e,t){return e+t}),0);S(n),A(r)},O=function(){var e=g(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.myprofile.GET_MY_ADDRESS();case 3:(t=e.sent)&&E(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){Q(),z(),O()}),[]);var Q=function(){var e=g(r().mark((function e(){var t,a,n,s,l,c,i,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=4,v.Z.cart.GET_CART();case 4:(t=e.sent)&&(o(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(n=a.data)||void 0===n||null===(s=n.cartDetail)||void 0===s?void 0:s.cartDetails),P(null===t||void 0===t||null===(l=t.data)||void 0===l||null===(c=l.data)||void 0===c||null===(i=c.cartDetail)||void 0===i?void 0:i.cartDetails)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=14;break;case 13:localStorage.getItem("cartDetail")&&(d=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),o(d.cartDetails),P(d.cartDetails));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=g(r().mark((function e(){var t,a,n,s,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=5,v.Z.myprofile.GET_MY_ADDRESS();case 5:s=e.sent,j(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.data),(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.length)>0&&(null===s||void 0===s||null===(l=s.data)||void 0===l||null===(c=l.data)||void 0===c||c.map((function(e){e.defaultAddress&&I(e.id)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=g(r().mark((function e(t){var a,n,s,l,c,i,o,d,u,m,p,f,x,j,g,b,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=22;break}return e.next=4,v.Z.cart.GET_CART();case 4:return s=e.sent,l=[],(null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.cartDetail)&&(l=null===s||void 0===s||null===(c=s.data)||void 0===c||null===(i=c.data)||void 0===i||null===(o=i.cartDetail)||void 0===o?void 0:o.cartDetails),null===l||void 0===l||l.push(t),"id",d=N(new Map(null===l||void 0===l?void 0:l.map((function(e){return[e.id,e]}))).values()),u=d.map((function(e){return e.finalAmount*e.selectedQuantity})),m=d.map((function(e){return e.selectedQuantity})),p=u.reduce((function(e,t){return e+t}),0),f=m.reduce((function(e,t){return e+t}),0),x={cartDetail:{cartDetails:d},totalAmount:p,totalItems:d.length,totalQuantity:f,addressId:C},e.next=17,v.Z.cart.UPDATE_CART(x);case 17:e.sent,h.Am.success("Cart updated!"),Q(),e.next=23;break;case 22:j=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),g=[],j&&(g=j.cartDetails),g.push(t),"id",b=N(new Map(g&&(null===g||void 0===g?void 0:g.map((function(e){return[e.id,e]})))).values()),y={cartDetail:{cartDetails:b}},localStorage.setItem("cartDetail",JSON.stringify(null===y||void 0===y?void 0:y.cartDetail)),h.Am.success("Cart updated!"),Q();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=g(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=9;break}return t={cartDetail:{cartDetails:[]},totalAmount:0,totalItems:0,totalQuantity:0,addressId:C},e.next=4,v.Z.cart.UPDATE_CART(t);case 4:e.sent,h.Am.success("Cart updated!"),Q(),e.next=10;break;case 9:a={cartDetail:{cartDetails:[]}},localStorage.setItem("cartDetail",JSON.stringify(a.cartDetail)),h.Am.success("Cart updated!"),Q();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=g(r().mark((function e(t){var a,n,s,c,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return a=N(l),l.map((function(e,a){e.id==t.id&&(n=a)})),a.splice(n,1),s={cartDetail:{cartDetails:a},totalAmount:_,totalItems:a.length,totalQuantity:w,addressId:C},e.next=8,v.Z.cart.UPDATE_CART(s);case 8:e.sent,h.Am.success("Cart updated!"),Q(),e.next=14;break;case 13:c=N(l),l.map((function(e,a){e.id==t.id&&(i=a)})),c.splice(i,1),o={cartDetail:{cartDetails:c}},localStorage.setItem("cartDetail",JSON.stringify(o.cartDetail)),h.Am.success("Cart updated!"),Q();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=localStorage.getItem("access_token");function M(){return(M=g(r().mark((function e(){var t,a,n,s,c,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,b("https://checkout.razorpay.com/v1/checkout.js");case 3:if(e.sent){e.next=7;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 7:return e.next=9,Z(l[0]);case 9:return e.next=11,v.Z.cart.CHECKOUT();case 11:s=e.sent,c=JSON.parse(localStorage.getItem("profile")),i={key:"rzp_test_ug6gBARp85Aq1j",currency:"INR",amount:null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.totalAmount,order_id:null===s||void 0===s||null===(a=s.data)||void 0===a||null===(n=a.razorpayPaymentDetails)||void 0===n?void 0:n.id,name:"KoraKagaj",description:"Thank you for ordering. Please initiate payment!",image:"http://korakagaj-dev.s3-website.ap-south-1.amazonaws.com/assets/imgs/theme/logo.svg",handler:function(e){g(r().mark((function e(){var t,a,n,l,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={orderId:null===s||void 0===s||null===(t=s.data)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.id,paymentResponse:{id:null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.razorpayPaymentDetails.id,status:"paid",amount:null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.totalAmount}},e.prev=2,e.next=5,v.Z.cart.PAYMENT_LOG(c);case 5:e.sent,R.push("/thankyou"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},prefill:{name:c.firstName,email:c.email,phone_number:c.phoneNumber}},new window.Razorpay(i).open();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.Z,{parent:t("Home"),sub:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("a",{href:"/products",children:[" ",t("Product")]})}),subChild:t("Cart"),children:(0,s.jsx)("section",{className:"mt-50 mb-50",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsxs)("div",{className:"table-responsive",children:[(null===l||void 0===l?void 0:l.length)>0?"":t("No Products"),(0,s.jsxs)("table",{className:(null===l||void 0===l?void 0:l.length)>0?"table shopping-summery text-center clean":"d-none",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"main-heading",children:[(0,s.jsx)("th",{scope:"col",children:t("Image")}),(0,s.jsx)("th",{scope:"col",children:t("Name")}),(0,s.jsx)("th",{scope:"col",children:t("Price")}),(0,s.jsx)("th",{scope:"col",children:t("Quantity")}),(0,s.jsx)("th",{scope:"col",children:t("Subtotal")}),(0,s.jsx)("th",{scope:"col",children:t("Remove")})]})}),(0,s.jsxs)("tbody",{children:[l&&l.map((function(e,t){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"image product-thumbnail",children:(0,s.jsx)("img",{src:a+e.featuredImage,alt:"",crossOrigin:"anonymous"})}),(0,s.jsxs)("td",{className:"product-des product-name",children:[(0,s.jsx)("h5",{className:"product-name",children:(0,s.jsx)(m(),{href:"/products/[slug]",as:"/products/".concat(null===e||void 0===e?void 0:e.id),children:(0,s.jsx)("a",{children:e.productName})})}),(null===e||void 0===e?void 0:e.selectedColor)||(null===e||void 0===e?void 0:e.selectedSize)?(0,s.jsxs)("div",{className:"font-xs",children:[(null===e||void 0===e?void 0:e.selectedColor)&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"align-items-center row pe-0 ps-0 m-0",children:(0,s.jsxs)("div",{className:"col pe-0 ps-0 m-0 p-0",children:[(0,s.jsx)("small",{className:"mb-0 m-0",children:"Color :"})," \xa0 ",(0,s.jsx)("span",{className:"d-inline-block rounded-circle ps-1 pe-0 m-0 mt-2",style:{border:"1px solid black",width:"12px",height:"12px",backgroundColor:null===e||void 0===e?void 0:e.selectedColor}}),"  "]})})}),(null===e||void 0===e?void 0:e.selectedSize)&&(0,s.jsxs)("small",{className:"ml-md-2",children:["Size: ",null===e||void 0===e?void 0:e.selectedSize]})]}):null]}),(0,s.jsx)("td",{className:"price","data-title":"Price",children:(0,s.jsxs)("span",{children:["Rs. ",e.finalAmount]})}),(0,s.jsx)("td",{className:"text-center","data-title":"Stock",children:(0,s.jsxs)("div",{className:"detail-qty border radius m-auto",children:[(0,s.jsx)("a",{onClick:function(t){return function(e){e.selectedQuantity=e.selectedQuantity-1,Z(e)}(e)},className:"qty-down",children:(0,s.jsx)("i",{className:"fi-rs-angle-small-down"})}),(0,s.jsx)("span",{className:"qty-val",children:e.selectedQuantity}),(0,s.jsx)("a",{onClick:function(t){return function(e){e.selectedQuantity=e.selectedQuantity+1,Z(e)}(e)},className:"qty-up",children:(0,s.jsx)("i",{className:"fi-rs-angle-small-up"})})]})}),(0,s.jsx)("td",{className:"text-right","data-title":"Cart",children:(0,s.jsxs)("span",{children:["Rs."," ",e.finalAmount*e.selectedQuantity]})}),(0,s.jsx)("td",{className:"action","data-title":"Remove",children:(0,s.jsx)("a",{onClick:function(t){return G(e)},className:"text-muted",children:(0,s.jsx)("i",{className:"fi-rs-trash"})})})]},t)})),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"text-end",children:l&&l.length>0&&(0,s.jsxs)("a",{href:"#",onClick:U,className:"text-muted",children:[(0,s.jsx)("i",{className:"fi-rs-cross-small"}),"Clear Cart"]})})})]})]})]}),(0,s.jsx)("div",{className:"cart-action text-end",children:(0,s.jsx)(m(),{className:"btn",href:"/products",children:(0,s.jsxs)("button",{className:"btn",children:[(0,s.jsx)("i",{className:"fi-rs-shopping-bag mr-10"}),t("Continue Shopping")]})})}),(0,s.jsx)("div",{className:"divider center_icon mt-50 mb-50",children:(0,s.jsx)("i",{className:"fi-rs-fingerprint"})}),(0,s.jsxs)("div",{className:"row mb-50",children:[(0,s.jsxs)("div",{className:"col-lg-6 col-md-12",children:[(0,s.jsx)("div",{className:"heading_s1 mb-3",children:(0,s.jsx)("h4",{children:"Select Address"})}),(0,s.jsxs)("form",{className:"field_form shipping_calculator",children:[(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("div",{className:"form-group col-lg-12",children:(0,s.jsx)("div",{className:"custom_select",children:(0,s.jsxs)("select",{className:"form-control select-active",value:C,onChange:function(e){return I(e.target.value)},children:[(0,s.jsx)("option",{value:"",children:t("Choose a option...")}),x&&x.length>0&&x.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.address.address})}))]})})})}),(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("div",{className:"form-group col-lg-12",children:(0,s.jsx)(m(),{href:"/myprofile?index=4",children:(0,s.jsxs)("button",{className:"btn btn-sm w-100",children:[(0,s.jsx)("i",{className:"fi-rs-shuffle mr-10"}),"Add new address"]})})})})]})]}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"border p-md-4 p-30 border-radius cart-totals",children:[(0,s.jsx)("div",{className:"heading_s1 mb-3",children:(0,s.jsx)("h4",{children:t("Cart Totals")})}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsx)("table",{className:"table",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Cart Subtotal")}),(0,s.jsx)("td",{className:"cart_total_amount",children:(0,s.jsxs)("span",{className:"font-lg fw-900 text-brand",children:["Rs. ",_]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Shipping")}),(0,s.jsxs)("td",{className:"cart_total_amount",children:[(0,s.jsx)("i",{className:"ti-gift mr-5"}),t("Free Shipping")]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Total")}),(0,s.jsx)("td",{className:"cart_total_amount",children:(0,s.jsx)("strong",{children:(0,s.jsxs)("span",{className:"font-xl fw-900 text-brand",children:["Rs. ",_]})})})]})]})})}),J?(0,s.jsxs)("a",{onClick:function(){C?function(){M.apply(this,arguments)}():x.length>0?h.Am.error("Choose your address"):h.Am.error("Add your address")},href:"#",className:"btn ",children:[(0,s.jsx)("i",{className:"fi-rs-box-alt mr-10"}),t("Proceed To CheckOut")]}):(0,s.jsx)(m(),{className:"btn",href:"/login",children:(0,s.jsxs)("a",{href:"#",className:"btn ",children:[(0,s.jsx)("i",{className:"fi-rs-box-alt mr-10"}),t("Proceed to Login")]})})]})})]})]})})})})})})}))}},function(e){e.O(0,[664,750,436,695,774,888,179],(function(){return t=8024,e(e.s=t);var t}));var t=e.O();_N_E=t}]);