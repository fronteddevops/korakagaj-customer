(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{8024:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop-cart",function(){return a(8187)}])},8187:function(e,t,a){"use strict";a.r(t);var n=a(4051),r=a.n(n),s=a(5893),c=a(2664),l=a(297),i=a(2702),o=a.n(i),d=a(1664),u=a.n(d),m=a(2920),h=a(7294),f=a(3436),x=a(7421);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function j(e,t,a,n,r,s,c){try{var l=e[s](c),i=l.value}catch(o){return void a(o)}l.done?t(i):Promise.resolve(i).then(n,r)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function c(e){j(s,n,r,c,l,"next",e)}function l(e){j(s,n,r,c,l,"throw",e)}c(void 0)}))}}function g(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=(0,c.$j)((function(e){return{cartItems:e.cart,activeCart:e.counter}}),{})((function(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=(0,x.$G)("common").t,a=o().BASE_URL_UPLOADS,n=(0,h.useState)([]),c=n[0],i=n[1],d=(0,h.useState)([]),p=d[0],j=d[1],N=(0,h.useState)(1),b=N[0],y=N[1],S=(0,h.useState)(1),_=S[0],C=S[1],D=(0,h.useState)(0),w=D[0],A=D[1],k=function(e){var t=e.map((function(e){return e.finalAmount*e.selectedQuantity})),a=e.map((function(e){return e.selectedQuantity})),n=t.reduce((function(e,t){return e+t}),0),r=a.reduce((function(e,t){return e+t}),0);console.log(t,n),y(n),C(r)};(0,h.useEffect)((function(){I(),T()}),[]);var I=function(){var e=v(r().mark((function e(){var t,a,n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=13;break}return e.prev=1,e.next=4,f.Z.cart.GET_CART();case 4:(t=e.sent)&&(i(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data[0].cartDetail.cartDetails),k(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data[0].cartDetail.cartDetails)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=14;break;case 13:localStorage.getItem("cartDetail")&&(s=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),i(s.cartDetails));case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=v(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.Z.myprofile.GET_MY_ADDRESS();case 3:t=e.sent,console.log(t.data.data),j(t.data.data),t.data.data.length>0&&t.data.data.map((function(e){e.defaultAddress&&A(e.id)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=v(r().mark((function e(t){var a,n,s,c,l,i,o,d,u,h,x,p,j;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=23;break}return e.next=3,f.Z.cart.GET_CART();case 3:return a=e.sent,n=[],a.data.data[0].cartDetail&&(n=a.data.data[0].cartDetail.cartDetails),null===n||void 0===n||n.push(t),"id",s=g(new Map(null===n||void 0===n?void 0:n.map((function(e){return[e.id,e]}))).values()),c=s.map((function(e){return e.finalAmount*e.selectedQuantity})),l=s.map((function(e){return e.selectedQuantity})),i=c.reduce((function(e,t){return e+t}),0),o=l.reduce((function(e,t){return e+t}),0),d={cartDetail:{cartDetails:s},totalAmount:i,totalItems:s.length,totalQuantity:o,addressId:w},console.log(d),e.next=17,f.Z.cart.UPDATE_CART(d);case 17:u=e.sent,console.log(u),m.Am.success("Cart updated!"),I(),e.next=24;break;case 23:h=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),x=[],h&&(x=h.cartDetails),x.push(t),"id",p=g(new Map(x.map((function(e){return[e.id,e]}))).values()),j={cartDetail:{cartDetails:p}},localStorage.setItem("cartDetail",JSON.stringify(j.cartDetail)),m.Am.success("Cart updated!"),I();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=v(r().mark((function e(){var t,a,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=11;break}return t={cartDetail:{cartDetails:[]},totalAmount:0,totalItems:0,totalQuantity:0,addressId:w},console.log(t),e.next=5,f.Z.cart.UPDATE_CART(t);case 5:a=e.sent,console.log(a),m.Am.success("Cart updated!"),I(),e.next=12;break;case 11:n={cartDetail:{cartDetails:[]}},localStorage.setItem("cartDetail",JSON.stringify(n.cartDetail)),m.Am.success("Cart updated!"),I();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=v(r().mark((function e(t){var a,n,s,l,i,o,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access_token")){e.next=16;break}return a=g(c),c.map((function(e,a){e.id==t.id&&(n=a)})),a.splice(n,1),console.log(c,a),s={cartDetail:{cartDetails:a},totalAmount:b,totalItems:a.length,totalQuantity:_,addressId:w},console.log(s),e.next=10,f.Z.cart.UPDATE_CART(s);case 10:l=e.sent,console.log(l),m.Am.success("Cart updated!"),I(),e.next=17;break;case 16:i=g(c),c.map((function(e,a){e.id==t.id&&(o=a)})),i.splice(o,1),d={cartDetail:{cartDetails:i}},localStorage.setItem("cartDetail",JSON.stringify(d.cartDetail)),m.Am.success("Cart updated!"),I();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=localStorage.getItem("access_token"),R=function(){var e=v(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(c[0]);case 3:return e.next=5,f.Z.cart.CHECKOUT();case 5:t=e.sent,console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.Z,{parent:t("Home"),sub:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("a",{href:"/products",children:[" ",t("Product")]})}),subChild:t("Cart"),children:(0,s.jsx)("section",{className:"mt-50 mb-50",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsxs)("div",{className:"table-responsive",children:[c.length<=0&&t("No Products"),(0,s.jsxs)("table",{className:(null===c||void 0===c?void 0:c.length)>0?"table shopping-summery text-center clean":"d-none",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"main-heading",children:[(0,s.jsx)("th",{scope:"col",children:t("Image")}),(0,s.jsx)("th",{scope:"col",children:t("Name")}),(0,s.jsx)("th",{scope:"col",children:t("Price")}),(0,s.jsx)("th",{scope:"col",children:t("Quantity")}),(0,s.jsx)("th",{scope:"col",children:t("Subtotal")}),(0,s.jsx)("th",{scope:"col",children:t("Remove")})]})}),(0,s.jsxs)("tbody",{children:[c&&c.map((function(e,t){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"image product-thumbnail",children:(0,s.jsx)("img",{src:a+e.featuredImage,alt:"",crossOrigin:"anonymous"})}),(0,s.jsxs)("td",{className:"product-des product-name",children:[(0,s.jsx)("h5",{className:"product-name",children:(0,s.jsx)(u(),{href:"/products/[slug]",as:"/products/".concat(null===e||void 0===e?void 0:e.id),children:(0,s.jsx)("a",{children:e.productName})})}),(null===e||void 0===e?void 0:e.selectedColor)||(null===e||void 0===e?void 0:e.selectedSize)?(0,s.jsxs)("p",{className:"font-xs",children:[(null===e||void 0===e?void 0:e.selectedColor)&&(0,s.jsxs)(s.Fragment,{children:["Color : ",null===e||void 0===e?void 0:e.selectedColor," ",(0,s.jsx)("br",{})]}),(null===e||void 0===e?void 0:e.selectedSize)&&(0,s.jsxs)(s.Fragment,{children:["Size : ",null===e||void 0===e?void 0:e.selectedSize," ",(0,s.jsx)("br",{})]})]}):null]}),(0,s.jsx)("td",{className:"price","data-title":"Price",children:(0,s.jsxs)("span",{children:["$",e.finalAmount]})}),(0,s.jsx)("td",{className:"text-center","data-title":"Stock",children:(0,s.jsxs)("div",{className:"detail-qty border radius m-auto",children:[(0,s.jsx)("a",{onClick:function(t){return function(e){e.selectedQuantity=e.selectedQuantity-1,E(e)}(e)},className:"qty-down",children:(0,s.jsx)("i",{className:"fi-rs-angle-small-down"})}),(0,s.jsx)("span",{className:"qty-val",children:e.selectedQuantity}),(0,s.jsx)("a",{onClick:function(t){return function(e){e.selectedQuantity=e.selectedQuantity+1,E(e)}(e)},className:"qty-up",children:(0,s.jsx)("i",{className:"fi-rs-angle-small-up"})})]})}),(0,s.jsx)("td",{className:"text-right","data-title":"Cart",children:(0,s.jsxs)("span",{children:["$",e.finalAmount*e.selectedQuantity]})}),(0,s.jsx)("td",{className:"action","data-title":"Remove",children:(0,s.jsx)("a",{onClick:function(t){return Q(e)},className:"text-muted",children:(0,s.jsx)("i",{className:"fi-rs-trash"})})})]},t)})),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"text-end",children:c.length>0&&(0,s.jsxs)("a",{onClick:P,className:"text-muted",children:[(0,s.jsx)("i",{className:"fi-rs-cross-small"}),"Clear Cart"]})})})]})]})]}),(0,s.jsx)("div",{className:"cart-action text-end",children:(0,s.jsx)(u(),{className:"btn",href:"/products",children:(0,s.jsxs)("button",{className:"btn",children:[(0,s.jsx)("i",{className:"fi-rs-shopping-bag mr-10"}),t("Continue Shopping")]})})}),(0,s.jsx)("div",{className:"divider center_icon mt-50 mb-50",children:(0,s.jsx)("i",{className:"fi-rs-fingerprint"})}),(0,s.jsxs)("div",{className:"row mb-50",children:[(0,s.jsxs)("div",{className:"col-lg-6 col-md-12",children:[(0,s.jsx)("div",{className:"heading_s1 mb-3",children:(0,s.jsx)("h4",{children:"Select Address"})}),(0,s.jsxs)("form",{className:"field_form shipping_calculator",children:[(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("div",{className:"form-group col-lg-12",children:(0,s.jsx)("div",{className:"custom_select",children:(0,s.jsxs)("select",{className:"form-control select-active",value:w,onChange:function(e){return A(e.target.value)},children:[(0,s.jsx)("option",{value:"",children:t("Choose a option...")}),p&&p.length>0&&p.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.address.address})}))]})})})}),(0,s.jsx)("div",{className:"form-row",children:(0,s.jsx)("div",{className:"form-group col-lg-12",children:(0,s.jsxs)("button",{className:"btn btn-sm w-100",children:[(0,s.jsx)("i",{className:"fi-rs-shuffle mr-10"}),"Add new address"]})})})]})]}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"border p-md-4 p-30 border-radius cart-totals",children:[(0,s.jsx)("div",{className:"heading_s1 mb-3",children:(0,s.jsx)("h4",{children:t("Cart Totals")})}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsx)("table",{className:"table",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Cart Subtotal")}),(0,s.jsx)("td",{className:"cart_total_amount",children:(0,s.jsxs)("span",{className:"font-lg fw-900 text-brand",children:["Rs. ",b]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Shipping")}),(0,s.jsxs)("td",{className:"cart_total_amount",children:[(0,s.jsx)("i",{className:"ti-gift mr-5"}),t("Free Shipping")]})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"cart_total_label",children:t("Total")}),(0,s.jsx)("td",{className:"cart_total_amount",children:(0,s.jsx)("strong",{children:(0,s.jsxs)("span",{className:"font-xl fw-900 text-brand",children:["$",b]})})})]})]})})}),O?(0,s.jsxs)("a",{onClick:function(){return R()},href:"#",className:"btn ",children:[(0,s.jsx)("i",{className:"fi-rs-box-alt mr-10"}),t("Proceed To CheckOut")]}):(0,s.jsx)(u(),{className:"btn",href:"/login",children:(0,s.jsxs)("a",{href:"#",className:"btn ",children:[(0,s.jsx)("i",{className:"fi-rs-box-alt mr-10"}),t("Proceed to Login")]})})]})})]})]})})})})})})}))}},function(e){e.O(0,[664,30,436,695,774,888,179],(function(){return t=8024,e(e.s=t);var t}));var t=e.O();_N_E=t}]);