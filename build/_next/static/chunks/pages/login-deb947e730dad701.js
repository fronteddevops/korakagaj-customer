(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4754)}])},4754:function(e,t,r){"use strict";r.r(t);var n=r(4051),a=r.n(n),s=r(5893),i=r(297),o=(r(4213),r(3436)),l=r(9603),c=r(9417),u=r(7294),d=r(2920),m=r(1163),h=r(7421);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,a,s,i){try{var o=e[s](i),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(n,a)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){v(s,n,a,i,o,"next",e)}function o(e){v(s,n,a,i,o,"throw",e)}i(void 0)}))}}function x(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(){var e=(0,h.$G)("common").t,t=(0,u.useState)(""),r=t[0],n=t[1],p=(0,u.useState)(""),v=p[0],f=p[1],b=(0,m.useRouter)(),j=(0,u.useState)(""),w=j[0],N=j[1],y=(0,u.useState)(""),k=y[0],S=y[1],_=(0,u.useState)(!0),E=_[0],D=_[1],A=(0,u.useState)(!0),C=A[0],O=A[1],I=(0,u.useState)(!1),T=I[0],L=I[1],R=(0,u.useState)(!1),P=R[0],q=R[1],F=(0,u.useState)(""),G=F[0],Z=F[1],U=(0,u.useState)(""),$=U[0],z=U[1],H=function(e){var t,r;d.Am.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"An error occurred")},K=function(){var e=g(a().mark((function e(t){var n,s,i,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t||t.preventDefault(),n=!0,N(""),S(""),""===r?(N("Enter a valid email address"),n=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||(N("Enter a valid email address"),n=!1),""===v&&(S("Please enter the password"),n=!1),!n){e.next=22;break}return e.prev=7,s={email:r,password:v,role:"Customer"},console.log(s),e.next=12,o.Z.auth.LOGIN_USER(s);case 12:return i=e.sent,e.next=15,M();case 15:i&&(localStorage.setItem("userId",null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.user.id),W(),D(!1),setTimeout((function(){b.push("/")}),1e3)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),D(!0),X(e.t0);case 22:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=g(a().mark((function e(){var t,r,n,s,i,l,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("cartDetail")){e.next=19;break}return t=localStorage.getItem("cartDetail")&&JSON.parse(localStorage.getItem("cartDetail")),r=[],t&&t.cartDetails.length>0&&(r=t.cartDetails),e.next=6,o.Z.cart.GET_CART();case 6:return n=e.sent,s=[],n.data.data[0].cartDetail&&(s=null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.data[0].cartDetail.cartDetails),s=x(s).concat(x(r)),"id",l=x(new Map(s.map((function(e){return[e.id,e]}))).values()),c={cartDetail:{cartDetails:l}},console.log(c),e.next=16,o.Z.cart.UPDATE_CART(c);case 16:u=e.sent,console.log(u),localStorage.removeItem("cartDetail");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){return d.Am.success("Login User successfully")},X=function(e){var t,r;d.Am.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"An error occurred")},Y=function(){var e=g(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),q(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=g(a().mark((function e(t){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!1),t.preventDefault(),r=!0,z(""),""===G?(z("Enter a valid email address"),r=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G)||(z("Enter a valid email address"),r=!1),!r){e.next=20;break}return e.prev=6,n={email:G},console.log(n),e.next=11,o.Z.auth.FORGOT_PASSWORD(n);case 11:(s=e.sent)?(d.Am.success("Email Sent successfully"),q(!1),O(!1)):alert(s.data.guide),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),H(e.t0),O(!0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),!1===P&&(0,s.jsx)(i.Z,{parent:e("Home"),sub:(0,s.jsx)("a",{href:"/login",children:e("Login")}),children:(0,s.jsx)("section",{className:"pt-100 pb-100 bg-image",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 m-auto",children:(0,s.jsx)("div",{className:"row justify-content-around",children:(0,s.jsx)("div",{className:"col-lg-5",children:(0,s.jsx)("div",{className:"login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5",children:(0,s.jsxs)("div",{className:"padding_eight_all bg-white",children:[(0,s.jsx)("div",{className:"heading_s1",children:(0,s.jsx)("h3",{className:"mb-30",children:e("Login")})}),(0,s.jsxs)("form",{method:"post",onSubmit:K,children:[(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{type:"text",required:"",name:"email",placeholder:e("Your Email"),value:r,onChange:function(e){n(e.target.value.trim()),e.target.value.trim()&&n(e.target.value),0===e.target.value.length?N("Required"):N("")},onKeyDown:function(e){"Enter"===e.key?K():n(e.target.value)}}),w?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:w})}):null]}),(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{required:"",type:T?"text":"password",name:"password",placeholder:e("Password"),onChange:function(e){f(e.target.value.trim()),e.target.value.trim()&&f(e.target.value),0===e.target.value.length?S("Required"):S("")},value:v,onKeyDown:function(e){"Enter"===e.key?K():f(e.target.value),e.target.value&&S("")},"aria-describedby":"password"}),(0,s.jsx)(l.G,{icon:T?c.Aq:c.Mdf,className:"icon-class",onClick:function(){L(!T)},style:{position:"absolute",cursor:"pointer",marginTop:"13px",width:"17px",marginLeft:"-29px"}}),k?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:k})}):null]}),"\xa0 \xa0 \xa0",(0,s.jsxs)("div",{className:"login_footer form-group",children:[(0,s.jsx)("div",{className:"chek-form",children:(0,s.jsxs)("div",{className:"custome-checkbox",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",name:"checkbox",id:"exampleCheckbox1",value:""}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"exampleCheckbox1",children:(0,s.jsx)("span",{children:e("Remember me")})})]})}),(0,s.jsx)("span",{onClick:Y,style:{cursor:"pointer"},children:e("Forgot password?")})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-fill-out btn-block hover-up w-100",name:"login",disabled:!(r&&v&&E),children:e("Log in")})})]}),(0,s.jsx)("div",{className:"divider-text-center mt-15 mb-15",children:(0,s.jsxs)("span",{children:[" ",e("or")]})}),(0,s.jsxs)("ul",{className:"btn-login list_none text-center mb-15",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"btn btn-facebook hover-up mb-lg-0 mb-sm-4",children:e("Login With Facebook")})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#",className:"btn btn-google hover-up mt-2",children:e("Login With Google")})})]}),(0,s.jsxs)("div",{class:"text-muted text-center",children:[" ",e("Don't have an account ?"),"  ",(0,s.jsx)("a",{href:"/register",children:e("Sign up now")})]})]})})})})})})})})}),P&&(0,s.jsx)(i.Z,{parent:e("Home"),sub:(0,s.jsx)("a",{href:"/login",children:e("Login")}),children:(0,s.jsx)("section",{className:"pt-100 pb-100 bg-image",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 m-auto",children:(0,s.jsx)("div",{className:"row justify-content-around",children:(0,s.jsx)("div",{className:"col-lg-5",children:(0,s.jsx)("div",{className:"login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5",children:(0,s.jsxs)("div",{className:"padding_eight_all bg-white",children:[(0,s.jsx)("div",{className:"heading_s1",children:(0,s.jsx)("h4",{className:"mb-30",children:e("Enter your email to reset your password")})}),(0,s.jsxs)("form",{method:"post",onSubmit:B,children:[(0,s.jsxs)("div",{className:"col-md-12 mt-4",children:[(0,s.jsx)("input",{type:"text",required:"",name:"email",placeholder:e("Your Email"),value:G,onChange:function(e){Z(e.target.value.trim()),O(!0),e.target.value.trim()&&Z(e.target.value),0===e.target.value.length?(z("Required"),O(!0)):z("")},onKeyDown:function(e){"Enter"===e.key?B():Z(e.target.value)}}),$?(0,s.jsx)("div",{className:"error-message",children:(0,s.jsx)("span",{style:{color:"red",fontSize:"12px",position:"absolute"},children:$})}):null]}),"\xa0 \xa0 \xa0",(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("button",{className:"btn btn-fill-out btn-block hover-up w-100",disabled:!(C&&G),children:e("Save")})})]})]})})})})})})})})})]})}}},function(e){e.O(0,[976,664,30,603,436,695,774,888,179],(function(){return t=6429,e(e.s=t);var t}));var t=e.O();_N_E=t}]);